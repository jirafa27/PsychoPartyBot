--
-- Файл сгенерирован с помощью SQLiteStudio v3.4.4 в Вс сен 29 01:22:53 2024
--
-- Использованная кодировка текста: System
--
PRAGMA foreign_keys = off;
BEGIN TRANSACTION;

-- Таблица: meeting
CREATE TABLE IF NOT EXISTS meeting (
	id INTEGER NOT NULL, 
	date VARCHAR(10), 
	time VARCHAR(5), 
	title VARCHAR(30), 
	description VARCHAR(5000), 
	max_amount_of_participants INTEGER, 
	PRIMARY KEY (id)
);
INSERT INTO meeting (id, date, time, title, description, max_amount_of_participants) VALUES (1, '24.12.1994', '23:34', 'esrfd', 'asdfd', 'ewra');
INSERT INTO meeting (id, date, time, title, description, max_amount_of_participants) VALUES (2, '24.12.1994', '23:00', 'aes', 'sdf', 'adsf');

-- Таблица: rating
CREATE TABLE IF NOT EXISTS rating (
	id INTEGER NOT NULL, 
	rated_by_id INTEGER, 
	who_was_rated_id INTEGER, 
	score INTEGER NOT NULL, 
	comment TEXT NOT NULL, 
	date VARCHAR(10), 
	meeting_id INTEGER, 
	PRIMARY KEY (id), 
	UNIQUE (id), 
	FOREIGN KEY(rated_by_id) REFERENCES user (id) ON DELETE CASCADE ON UPDATE CASCADE, 
	FOREIGN KEY(who_was_rated_id) REFERENCES user (id) ON DELETE CASCADE ON UPDATE CASCADE, 
	FOREIGN KEY(meeting_id) REFERENCES meeting (id)
);
INSERT INTO rating (id, rated_by_id, who_was_rated_id, score, comment, date, meeting_id) VALUES (1, 1, 2, 4, 'ывап', '24.12.1994', 2);
INSERT INTO rating (id, rated_by_id, who_was_rated_id, score, comment, date, meeting_id) VALUES (2, 1, 2, 5, 'фку', '24.12.1994', 1);

-- Таблица: user
CREATE TABLE IF NOT EXISTS user (
	id INTEGER NOT NULL, 
	username VARCHAR(32) NOT NULL, 
	name VARCHAR(32) NOT NULL, 
	age INTEGER, 
	active INTEGER NOT NULL, 
	description VARCHAR(5000) NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (username)
);
INSERT INTO user (id, username, name, age, active, description) VALUES (1, 'test', 'geesfd', 23, 1, 'sdfd');
INSERT INTO user (id, username, name, age, active, description) VALUES (2, 'jirafa27', 'Настя', 29, 1, 'ывавп');

-- Таблица: user_meeting
CREATE TABLE IF NOT EXISTS user_meeting (
	id INTEGER NOT NULL, 
	user_id INTEGER NOT NULL, 
	meeting_id INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES user (id) ON DELETE CASCADE ON UPDATE CASCADE, 
	FOREIGN KEY(meeting_id) REFERENCES meeting (id) ON DELETE CASCADE ON UPDATE CASCADE
);

COMMIT TRANSACTION;
PRAGMA foreign_keys = on;
